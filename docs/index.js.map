{"version":3,"file":"index.js","mappings":"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","sources":["webpack://rust-wasm-canvas-image-example/webpack/runtime/async module","webpack://rust-wasm-canvas-image-example/./src/index.js","webpack://rust-wasm-canvas-image-example/../canvas-rs/pkg/canvas_rs_bg.js","webpack://rust-wasm-canvas-image-example/webpack/bootstrap","webpack://rust-wasm-canvas-image-example/webpack/runtime/define property getters","webpack://rust-wasm-canvas-image-example/webpack/runtime/global","webpack://rust-wasm-canvas-image-example/webpack/runtime/harmony module decorator","webpack://rust-wasm-canvas-image-example/webpack/runtime/hasOwnProperty shorthand","webpack://rust-wasm-canvas-image-example/webpack/runtime/wasm loading","webpack://rust-wasm-canvas-image-example/webpack/runtime/publicPath","webpack://rust-wasm-canvas-image-example/webpack/startup"],"sourcesContent":["var webpackThen = typeof Symbol === \"function\" ? Symbol(\"webpack then\") : \"__webpack_then__\";\nvar webpackExports = typeof Symbol === \"function\" ? Symbol(\"webpack exports\") : \"__webpack_exports__\";\nvar webpackError = typeof Symbol === \"function\" ? Symbol(\"webpack error\") : \"__webpack_error__\";\nvar completeQueue = (queue) => {\n\tif(queue) {\n\t\tqueue.forEach((fn) => (fn.r--));\n\t\tqueue.forEach((fn) => (fn.r-- ? fn.r++ : fn()));\n\t}\n}\nvar completeFunction = (fn) => (!--fn.r && fn());\nvar queueFunction = (queue, fn) => (queue ? queue.push(fn) : completeFunction(fn));\nvar wrapDeps = (deps) => (deps.map((dep) => {\n\tif(dep !== null && typeof dep === \"object\") {\n\t\tif(dep[webpackThen]) return dep;\n\t\tif(dep.then) {\n\t\t\tvar queue = [];\n\t\t\tdep.then((r) => {\n\t\t\t\tobj[webpackExports] = r;\n\t\t\t\tcompleteQueue(queue);\n\t\t\t\tqueue = 0;\n\t\t\t}, (e) => {\n\t\t\t\tobj[webpackError] = e;\n\t\t\t\tcompleteQueue(queue);\n\t\t\t\tqueue = 0;\n\t\t\t});\n\t\t\tvar obj = {};\n\t\t\tobj[webpackThen] = (fn, reject) => (queueFunction(queue, fn), dep['catch'](reject));\n\t\t\treturn obj;\n\t\t}\n\t}\n\tvar ret = {};\n\tret[webpackThen] = (fn) => (completeFunction(fn));\n\tret[webpackExports] = dep;\n\treturn ret;\n}));\n__webpack_require__.a = (module, body, hasAwait) => {\n\tvar queue = hasAwait && [];\n\tvar exports = module.exports;\n\tvar currentDeps;\n\tvar outerResolve;\n\tvar reject;\n\tvar isEvaluating = true;\n\tvar nested = false;\n\tvar whenAll = (deps, onResolve, onReject) => {\n\t\tif (nested) return;\n\t\tnested = true;\n\t\tonResolve.r += deps.length;\n\t\tdeps.map((dep, i) => (dep[webpackThen](onResolve, onReject)));\n\t\tnested = false;\n\t};\n\tvar promise = new Promise((resolve, rej) => {\n\t\treject = rej;\n\t\touterResolve = () => (resolve(exports), completeQueue(queue), queue = 0);\n\t});\n\tpromise[webpackExports] = exports;\n\tpromise[webpackThen] = (fn, rejectFn) => {\n\t\tif (isEvaluating) { return completeFunction(fn); }\n\t\tif (currentDeps) whenAll(currentDeps, fn, rejectFn);\n\t\tqueueFunction(queue, fn);\n\t\tpromise['catch'](rejectFn);\n\t};\n\tmodule.exports = promise;\n\tbody((deps) => {\n\t\tcurrentDeps = wrapDeps(deps);\n\t\tvar fn;\n\t\tvar getResult = () => (currentDeps.map((d) => {\n\t\t\tif(d[webpackError]) throw d[webpackError];\n\t\t\treturn d[webpackExports];\n\t\t}))\n\t\tvar promise = new Promise((resolve, reject) => {\n\t\t\tfn = () => (resolve(getResult));\n\t\t\tfn.r = 0;\n\t\t\twhenAll(currentDeps, fn, reject);\n\t\t});\n\t\treturn fn.r ? promise : getResult();\n\t}, (err) => (err && reject(promise[webpackError] = err), outerResolve()));\n\tisEvaluating = false;\n};","import { greet } from '../../canvas-rs/pkg'\n\ngreet()\n\n\nwindow.onload = () => {\n  let canvas = document.getElementById(\"bg_canvas\")\n  let text_canvas = document.getElementById(\"text_canvas\")\n  let ctx = canvas.getContext('2d');\n  let text_ctx = text_canvas.getContext('2d');\n\n  document.getElementById('fileUpload').onchange = (event) => {\n    let file = event.target.files[0];\n    let reader = new FileReader()\n    let image = new Image();\n    reader.readAsDataURL(file)\n    reader.onload = function (e) {\n      let result = e.target.result\n      image.src = result\n      image.onload = function () {\n        ctx.drawImage(image, 0, 0, 500, 500);\n      }\n    }\n  }\n\n  document.getElementById(\"inputText\").oninput = (event) => {\n    let text = event.target.value\n    text_ctx.clearRect(0, 0, text_canvas.clientWidth, text_canvas.clientHeight)\n    text_ctx.font = \"20px 微软雅黑\";\n    let length = text.length * 5\n    text_ctx.fillText(text, text_canvas.clientWidth / 2 - length, 250)\n  }\n}\n","import * as wasm from './canvas_rs_bg.wasm';\n\nconst lTextDecoder = typeof TextDecoder === 'undefined' ? (0, module.require)('util').TextDecoder : TextDecoder;\n\nlet cachedTextDecoder = new lTextDecoder('utf-8', { ignoreBOM: true, fatal: true });\n\ncachedTextDecoder.decode();\n\nlet cachegetUint8Memory0 = null;\nfunction getUint8Memory0() {\n    if (cachegetUint8Memory0 === null || cachegetUint8Memory0.buffer !== wasm.memory.buffer) {\n        cachegetUint8Memory0 = new Uint8Array(wasm.memory.buffer);\n    }\n    return cachegetUint8Memory0;\n}\n\nfunction getStringFromWasm0(ptr, len) {\n    return cachedTextDecoder.decode(getUint8Memory0().subarray(ptr, ptr + len));\n}\n/**\n*/\nexport function greet() {\n    wasm.greet();\n}\n\nexport function __wbg_alert_ef81b59062930f07(arg0, arg1) {\n    alert(getStringFromWasm0(arg0, arg1));\n};\n\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.hmd = (module) => {\n\tmodule = Object.create(module);\n\tif (!module.children) module.children = [];\n\tObject.defineProperty(module, 'exports', {\n\t\tenumerable: true,\n\t\tset: () => {\n\t\t\tthrow new Error('ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: ' + module.id);\n\t\t}\n\t});\n\treturn module;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.v = (exports, wasmModuleId, wasmModuleHash, importsObj) => {\n\tvar req = fetch(__webpack_require__.p + \"\" + wasmModuleHash + \".module.wasm\");\n\tif (typeof WebAssembly.instantiateStreaming === 'function') {\n\t\treturn WebAssembly.instantiateStreaming(req, importsObj)\n\t\t\t.then((res) => (Object.assign(exports, res.instance.exports)));\n\t}\n\treturn req\n\t\t.then((x) => (x.arrayBuffer()))\n\t\t.then((bytes) => (WebAssembly.instantiate(bytes, importsObj)))\n\t\t.then((res) => (Object.assign(exports, res.instance.exports)));\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) scriptUrl = scripts[scripts.length - 1].src\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","// startup\n// Load entry module and return exports\n// This entry module used 'module' so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(138);\n"],"names":["webpackThen","webpackExports","webpackError","completeQueue","completeFunction","queueFunction","window","onload","canvas","document","getElementById","text_canvas","ctx","getContext","text_ctx","onchange","event","file","target","files","reader","FileReader","image","Image","readAsDataURL","e","result","src","drawImage","oninput","text","value","clearRect","clientWidth","clientHeight","font","length","fillText","cachedTextDecoder","TextDecoder","module","require","ignoreBOM","fatal","decode","cachegetUint8Memory0","greet","__wbg_alert_ef81b59062930f07","arg0","arg1","ptr","len","alert","buffer","Uint8Array","subarray","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","id","loaded","__webpack_modules__","Symbol","queue","forEach","fn","r","push","a","body","hasAwait","currentDeps","outerResolve","reject","isEvaluating","nested","whenAll","deps","onResolve","onReject","map","dep","i","promise","Promise","resolve","rej","rejectFn","then","obj","ret","wrapDeps","getResult","d","err","definition","key","o","Object","defineProperty","enumerable","get","g","globalThis","this","Function","hmd","create","children","set","Error","prop","prototype","hasOwnProperty","call","v","wasmModuleId","wasmModuleHash","importsObj","req","fetch","p","WebAssembly","instantiateStreaming","res","assign","instance","x","arrayBuffer","bytes","instantiate","scriptUrl","importScripts","location","currentScript","scripts","getElementsByTagName","replace"],"sourceRoot":""}